@model Amirhome.Models.State

@{
    List<Amirhome.Models.Feature> ftrs = ViewData["Features"] as List<Amirhome.Models.Feature>;
    //IEnumerable<SelectListItem> prv = ViewData["Province"] as IEnumerable<SelectListItem>;
}

<div id="form_target">

    @using (Ajax.BeginForm("SubmitEditEstate", "Estate",
                                            new AjaxOptions
                                            {
                                                HttpMethod = "POST",
                                                InsertionMode = InsertionMode.InsertAfter,
                                                UpdateTargetId = "form_target",
                                                OnBegin = "$('#form-submit-btn').html('<i class=\"fa fa-refresh fa-spin\"></i>').attr('disabled', 'disabled');",
                                                OnComplete = "$('#estate_edit_form').html('ذخیره').removeAttr('disabled');",
                                                OnSuccess = "$('#server-message').addClass('text-success').html('تغییرات مورد نظر ذخیره شد');",
                                                OnFailure = "$('#server-message').addClass('text-danger').html('خطا در ثبت تغییرات');",
                                            }))
    {
        @Html.AntiForgeryToken()
    
        <div class="form-horizontal">
            <h2>ویرایش ملک</h2>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.ID)
            @Html.HiddenFor(model => model.OwnerID)
            @Html.HiddenFor(model => model.Flooring)
            @Html.HiddenFor(model => model.Archived)
            @Html.HiddenFor(model => model.Approved)
            @*@Html.HiddenFor(model => model.AgentID)*@
            @Html.HiddenFor(model => model.Date)
            @Html.HiddenFor(model => model.Description)
            @Html.HiddenFor(model => model.District1)
            @Html.HiddenFor(model => model.Features)
            @Html.HiddenFor(model => model.Feedbacks)
            @Html.HiddenFor(model => model.GoogleMaps)
            @Html.HiddenFor(model => model.Occasion)
            @Html.HiddenFor(model => model.Owner.ID)
            @Html.HiddenFor(model => model.Plans)
            @Html.HiddenFor(model => model.Privacy)
            @Html.HiddenFor(model => model.Serial)
            @Html.HiddenFor(model => model.StateType1)
            @Html.HiddenFor(model => model.province1)

            <div class="col-md-6">
                <div class="form-group">
                    <label class="col-md-3 control-label">نام مالک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Owner.Name, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">ایمیل مالک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Owner.Email, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">موبایل مالک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Owner.Mobile, new { @style = "margin-bottom: 5px;", @class = "form-control" })
                        @Html.TextBoxFor(m => m.Owner.Mobile2, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">شهر</label>
                    <div class="col-md-9">
                        @Html.DropDownList("City", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">نوع ملک</label>
                    <div class="col-md-9">
                        @Html.DropDownList("StateType", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">موقعیت ملک</label>
                    <div class="col-md-9">
                        @Html.DropDownList("StatePosition", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">واگذاری ملک</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Condition", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">آدرس ملک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Address, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">متراژ</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Area, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">متراژ تراس</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Terrace, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">قیمت هر متر</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.PricePerMeter, new { @class = "form-control price-type" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">قیمت کل</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.TotalPrice, new { @class = "form-control price-type" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">نما</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Facing", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">وضعیت سکونت</label>
                    <div class="col-md-9">
                        @Html.DropDownList("CurrentStatus", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">تعداد خواب</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Bedrooms, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">تعداد سرویس</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Bathrooms, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">طبقه</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Floor", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">واحد در طبقه</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Units", null, null, new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="col-md-3 control-label">تلفن مالک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Owner.Telephone, new { @style = "margin-bottom: 5px;", @class = "form-control" })
                        @Html.TextBoxFor(m => m.Owner.Tell2, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">آدرس مالک</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Owner.Address, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">استان</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Province", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">محله</label>
                    <div class="col-md-9">
                        @Html.DropDownList("District", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">منطقه</label>
                    <div class="col-md-9">
                        <select name="Region" id="Region" class="form-control">
                            <option value="0">منطقه</option>
                            @for (int i = 1; i <= 22; i++)
                            {
                                if (Model.Region == i.ToString())
                                {
                                    <option selected="selected" value="@i">منطقه @i</option>
                                }
                                else
                                {
                                    <option value="@i">منطقه @i</option>
                                }
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">کاربری ملک</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Usage", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">کوچه، پلاک و واحد</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.DetailedAddress, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">طول بر</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Length, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">مساحت کل</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Width, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">متراژ اصلاحی</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Reformative, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">قیمت اجاره</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.MortgagePrice, new { @class = "form-control price-type" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">پیش پرداخت</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.PrepaymentPrice, new { @class = "form-control price-type" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">قابل تبدیل</label>
                    <div class="col-md-9">
                        @Html.CheckBox("Changeable", Model.Changeable.HasValue ? Model.Changeable.Value : false ,new { @style = "maegin-top:5px;" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">کابینت</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Cabinet", null, null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">سن بنا</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Age, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">تعداد پارکینگ</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Parking, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">تعداد تلفن</label>
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Tells, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">تعداد طبقات ساختمان</label>
                    <div class="col-md-9">
                        @Html.DropDownList("Floors", null, null, new { @class = "form-control" })
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                
                </div>
                <div class="col-md-2"></div>
            </div>
       
            <div class="form-group">
                <div class="col-md-offset-10 col-md-2">
                    <button type="submit" value="ذخیره" class="btn btn-primary" id="form-submit-btn" style="min-width:100px;">ذخیره</button>
                    <p id="server-message"></p>
                </div>
            </div>
        </div>
    }
</div>
